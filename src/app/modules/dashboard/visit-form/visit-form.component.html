<div class="card p-3 shadow-sm">
  <h4 class="mb-3">Registrar Nueva Visita</h4>

  <form [formGroup]="visitaForm" (ngSubmit)="registrarVisita()">

    <!-- FILA 1 -->
    <div class="row mb-3">
      <div class="col-md-6">
        <label for="idCliente">Cliente</label>
        <select id="idCliente" class="form-control" formControlName="idCliente">
          <option value="">-- Seleccione un cliente --</option>
          <option *ngFor="let c of clientes" [value]="c.id">
            {{ c.nombreEmpresa }}
          </option>
        </select>
        <small *ngIf="visitaForm.get('idCliente')?.invalid && visitaForm.get('idCliente')?.touched" class="text-danger">
          Seleccione un cliente.
        </small>
      </div>

      <div class="col-md-6">
        <label for="idTecnico">Técnico Asignado</label>
        <select id="idTecnico" class="form-control" formControlName="idTecnico">
          <option value="">-- Seleccione un técnico --</option>
          <option *ngFor="let t of tecnicos" [value]="t.id">
            {{ t.nombre }} ({{ t.rol }})
          </option>
        </select>
        <small *ngIf="visitaForm.get('idTecnico')?.invalid && visitaForm.get('idTecnico')?.touched" class="text-danger">
          Seleccione un técnico.
        </small>
      </div>
    </div>

    <!-- FILA 2 -->
    <div class="row mb-3">
      <div class="col-md-6">
        <label for="fechaPlanificada">Fecha planificada</label>
        <input id="fechaPlanificada" type="date" class="form-control" formControlName="fechaPlanificada">
      </div>

      <div class="col-md-6">
        <label for="estado">Estado</label>
        <input id="estado" type="text" class="form-control" formControlName="estado" readonly>
      </div>
    </div>

    <!-- DESCRIPCIÓN -->
    <div class="mb-3">
      <label for="reporteVisita">Descripción / Reporte</label>
      <textarea id="reporteVisita" rows="3" class="form-control" formControlName="reporteVisita"
        placeholder="Detalle del trabajo a realizar o reporte de la visita"></textarea>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="!visitaForm.valid">
      Guardar Visita
    </button>
  </form>
</div>
