<!-- Barra superior -->
<header class="main-header" style="background:#1677ff;color:#fff;">
  <div class="container-fluid d-flex justify-content-between align-items-center py-2">
    <div class="d-flex align-items-center">
      <img src="assets/img/sky_logo_dark.png" alt="SkyNet" style="height:28px;margin-right:10px;">
      <strong>Panel SkyNet</strong>
    </div>
    <div>
      <span class="mr-3">{{ userEmail }}</span>
      <button class="btn btn-sm btn-danger" (click)="logout()">Cerrar Sesión</button>
    </div>
  </div>
</header>

<div class="d-flex">
  <!-- Sidebar -->
  <aside class="main-sidebar" style="width:270px;background:#1f2937;min-height:100vh;color:#fff;">
    <section class="sidebar p-3">
      <div class="text-center mb-3">
        <img src="assets/img/sky_logo_dark.png" alt="SkyNet" style="width:80px;">
        <div class="mt-2">
          <div>{{ userEmail }}</div>
          <small class="text-success">{{ userRol }}</small>
        </div>
      </div>

      <ul class="sidebar-menu list-unstyled">
        <!-- ADMINISTRADOR -->
        <ng-container *ngIf="userRol === 'ADMINISTRADOR'">
          <li class="mt-3 text-uppercase text-muted">Usuarios</li>
          <li><a routerLink="/dashboard/usuarios" class="text-white">Listado</a></li>
          <li><a routerLink="/dashboard/usuarios/crear" class="text-white">Nuevo Usuario</a></li>

          <li class="mt-3 text-uppercase text-muted">Clientes</li>
          <li><a routerLink="/dashboard/clientes" class="text-white">Listado</a></li>
          <li><a routerLink="/dashboard/clientes/nuevo" class="text-white">Nuevo Cliente</a></li>
        </ng-container>

        <!-- SUPERVISOR y ADMINISTRADOR -->
        <ng-container *ngIf="userRol === 'SUPERVISOR' || userRol === 'ADMINISTRADOR'">
          <li class="mt-3 text-uppercase text-muted">Visitas</li>
          <li><a routerLink="/dashboard/visitas" class="text-white">Listado</a></li>
          <li><a routerLink="/dashboard/visitas/registrar" class="text-white">Asignar Técnico</a></li>
        </ng-container>

        <!-- TÉCNICO -->
        <ng-container *ngIf="userRol === 'TECNICO'">
          <li class="mt-3 text-uppercase text-muted">Mis Visitas</li>
          <li><a routerLink="/dashboard/visitas" class="text-white">Visitas de Hoy</a></li>
        </ng-container>
      </ul>
    </section>
  </aside>

  <!-- Contenido principal -->
  <div class="content-wrapper p-4" style="flex:1;background:#f5f7fb;min-height:100vh;">
    <section class="content-header mb-3">
      <h2>Panel de Control <small class="text-muted">Control total</small></h2>
    </section>

    <!-- Tarjetas de resumen -->
    <div class="row">
      <div class="col-lg-3 col-6 mb-3">
        <div class="small-box bg-info text-white p-3 rounded">
          <div class="inner">
            <h3>{{ totalUsuarios }}</h3>
            <p>Usuarios Registrados</p>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-6 mb-3">
        <div class="small-box bg-success text-white p-3 rounded">
          <div class="inner">
            <h3>{{ totalClientes }}</h3>
            <p>Clientes Registrados</p>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-6 mb-3">
        <div class="small-box bg-warning p-3 rounded">
          <div class="inner">
            <h3>{{ visitasPendientes }}</h3>
            <p>Visitas Pendientes</p>
          </div>
        </div>
      </div>

      <div class="col-lg-3 col-6 mb-3">
        <div class="small-box bg-primary text-white p-3 rounded">
          <div class="inner">
            <h3>{{ visitasFinalizadas }}</h3>
            <p>Visitas Finalizadas</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Aquí renderizan las vistas hijas -->
    <router-outlet></router-outlet>
  </div>
</div>
